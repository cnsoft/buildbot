{% from 'build_line.html' import build_table, build_line %}
{% import 'forms.html' as forms %}

{% extends "layout.html" %}

{% block submenu %}
<nav class="sub-menu-container container-inner">
  <ul class="breadcrumbs-nav container-inner">
    <li>
        <a href="/">
          Home
        </a>
    </li>
    <li>
      <a href="/buildslaves">
            Buildslaves
      </a>
    </li>
    <li>
      {{ slavename|e }}
    </li>
  </ul>
</nav>
{% endblock %}


{% block content %}
<h1 class="main-head">
  Buildslave <span>{{ slavename|e }}</span>
</h1>

<div class="column-1">
  <div class="column-2">
    <h2 class="head-2">
      Administration options
    </h2>

    
    
    
    <ul class="list">
      {% if authz.advertiseAction('gracefulShutdown', request) %}
        
        {% if slave.getGraceful() %}
          <li>
            Slave will shut down gracefully when it is idle.
          </li>
        {% else %}
          <li>

            {{ forms.graceful_shutdown(shutdown_url, authz) }} <span class="notimpl">Not implemented</span>
          </li>
        {% endif %}
      
    {% endif %}
    <li>
      Request the slave to <input type="submit" value="reboot" class="link-button" /> remotely. <span class="notimpl">Not implemented</span>
    </li>
    <li>
      <input type="submit" value="Disable" class="link-button" /> the slave so that it cannot take any jobs. <span class="notimpl">Not implemented</span>
    </li>
    <li>
        <input type="submit" value="Enable" class="link-button" /> a disabled slave. <span class="notimpl">Not implemented</span>
    </li>
  </ul>

  </div>
  <div class="column-2 last">
    <h2 class="head-2"> 
      Buildslave information 
    </h2>
    {% if current %}
    <ul class="list">
    {% for b in current %}
     <li>
      <h2 class="small-head">
        Current job
      </h2>
      Running
      {{ build_line(b, True) }}
       <form method="post" action="{{ b.buildurl }}/stop" class="command stopbuild" style="display:inline">
         <input class="link-button" type="submit" value="Stop Build" />
         <input type="hidden" name="url" value="{{ this_url }}" />
       </form>
     </li>
    {% endfor %}
    <li>
      <h2 class="small-head">
        Last Message Received
      </h2> 
      <a href="#">
        Unzipping External/Mono/builds.zip...
      </a>
    </li>
    </ul>
    {% else %}
      <h2 class="small-head">
        No current builds
      </h2>
      <br>
      
    {% endif %}
    
    {{ build_table(recent, True) }}
  </div>

</div>



{% endblock %}